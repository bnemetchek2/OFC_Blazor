@page "/CardSelect/"
@inject Radzen.DialogService dialogService
@inject Services.BrowserService BrowserService;

<div class="d-flex almostFullHeight" >
    <div class="row col-sm-6" >
        <div class="d-flex" style="height: 20%">
            <div class="empty-card" style="width:20%;"></div>
        @foreach (var card in FrontCards)
        {
            <div class="" style="width:20%;">
            <Card CardModel="card" Style="width: 100%;"  />
            </div>
        }
        <div class="empty-card" style="width:20%;"></div>
        </div>
        <div class="d-flex" style="height: 20%">
        @foreach (var card in MiddleCards)
        {
            <div class="" style="width:20%;">
            <Card CardModel="card" Style="width: 100%;"  />
            </div>
        }
        </div>
        <div class="d-flex" style="height: 20%">
        @foreach (var card in BackCards)
        {
            <div class="" style="width:20%;">
            <Card CardModel="card" Style="width: 100%;"  />
            </div>
        }
        </div>
        <div class="d-flex" style="height: 20%">
        @foreach (var card in DrawCards)
        {
            <div class="" style="width:20%;">
            <Card CardModel="card" Style="width: 100%;"  />
            </div>
        }
        </div>
        <div class="d-flex" style="height: 20%">
        @foreach (var card in DiscardCards)
        {
            <div class="" style="width:20%;">
            <Card CardModel="card" Style="width: 100%;"  />
            </div>
        }
        </div>
    </div>

    <div class="row col-sm-6">
        <RadzenTabs style="height: 100%; width: 100%;" RenderMode="TabRenderMode.Client">
            <Tabs>
                <RadzenTabsItem Text="♤ Spades">
                    <FullSuitCards Suit="S" />
                </RadzenTabsItem>
                <RadzenTabsItem Text="♡ Hearts">
                    <FullSuitCards Suit="H" />
                </RadzenTabsItem>
                <RadzenTabsItem Text="♧ Clubs">
                    <FullSuitCards Suit="C" />
                </RadzenTabsItem>
                <RadzenTabsItem Text="♢ Diamonds">
                    <FullSuitCards Suit="D" />
                </RadzenTabsItem>
            </Tabs>
        </RadzenTabs>
    </div>
</div>



<div class="row">
    <div class="col-md-12 text-right">
        <RadzenButton Click="@((args) => dialogService.Close(false))" ButtonStyle="ButtonStyle.Secondary" Text="Cancel" Style="width: 120px" Class="mr-1" />
        <RadzenButton Click="@((args) => dialogService.Close(true))" Text="OK" Style="width: 120px" />
    </div>
</div>

@code {
    [Parameter] public List<int> FrontInts { get; set; }
    [Parameter] public List<int> MiddleInts { get; set; }
    [Parameter] public List<int> BackInts { get; set; }
    [Parameter] public List<int> DrawInts { get; set; }
    [Parameter] public List<int> DiscardInts { get; set; }

    List<CardModel> FrontCards = new List<CardModel>();
    List<CardModel> MiddleCards = new List<CardModel>();
    List<CardModel> BackCards = new List<CardModel>();
    List<CardModel> DrawCards = new List<CardModel>();
    List<CardModel> DiscardCards = new List<CardModel>();

    CardModel BackCard = new CardModel(-1);
    CardModel EmptyCard = new CardModel(0);

    protected override void OnInitialized()
    {
        FrontInts.Where(i => i > 0).ToList().ForEach(i => FrontCards.Add(new CardModel(i)));
        MiddleInts.Where(i => i > 0).ToList().ForEach(i => MiddleCards.Add(new CardModel(i)));
        BackInts.Where(i => i > 0).ToList().ForEach(i => BackCards.Add(new CardModel(i)));
        DrawInts.Where(i => i > 0).ToList().ForEach(i => DrawCards.Add(new CardModel(i)));
        DiscardInts.Where(i => i > 0).ToList().ForEach(i => DiscardCards.Add(new CardModel(i)));

    }
}
